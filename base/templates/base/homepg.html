{% extends 'main.html' %}   

{% block content %}

<style> 
    .home-container{
        display: grid; 
        grid-template-columns: 1fr 3fr 1fr;
    }
</style>


<div class="home-container">

    <div>
        <h3>Browse Topics</h3>
        <hr>

        <div>
            <a href="{% url 'home' %}">All</a>
        </div>

        {% for topic in topics %}
        <div>
            <a href="{% url 'home' %}?q={{topic.name}}">{{topic.name}}</a>
        </div>
        {% endfor %}

    </div>

    <div>
        <h5>{{room_count}} rooms available</h5>
        <a href="{% url 'create-room' %}">Create Room</a>

        <div> 
            {% for room in rooms %}
            <div> 
                {% if request.user == room.host %}
                <a href="{% url 'update-room' room.id %}">Edit</a>
                <a href="{% url 'delete-room' room.id %}">Delete</a>
                {% endif %}
                <span>@{{room.host.username}}</span>
                <h5>{{room.id}} -- <a href="{% url 'room' room.id %}">{{room.name}}</a></h5>
                <small>{{room.topic.name}}</small>
            </div>
        
            {% endfor %}
            
        </div>
    </div>

    <div> 
        <h3>Recent Activity</h3>
        <hr>
        {% for message in room_activity %}
            <div> 
                <small>{{message.created|timesince}} ago @{{message.user}}</small>   
                <small>replied to "{{message.room}}"</small>
                <p>{{message.body}}</p>
                <hr> 
            </div>
        {% endfor %}
    </div>
</div>

{% endblock %}

<!-- in the future, we could include the creation of rooms and modification of messages into the activity feed -->

<!-- the url room room.id method is useful if in future we decide to change the name of the name of the room in url, 
by using this method we don't need to change each value each time, it will automatically update -->